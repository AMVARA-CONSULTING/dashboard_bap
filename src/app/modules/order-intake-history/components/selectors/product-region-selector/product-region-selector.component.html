<mat-form-field>
  <mat-select panelClass="plant-select-panel" [formControl]="regionProductControl">
    <mat-select-trigger>
      <span class="mat-select-value-custom">{{ regionProductControl.value | productRegionLabelFormat | async }}</span>
    </mat-select-trigger>
    <ng-container *ngLet="rows | joinArrays:previousRows as allRows">
      <mat-optgroup label="REGIONS">
        <ng-container *ngFor="let region of allRows | distinctItems:'region' | keyvalue">
          <mat-option value="region|{{region.key}}">{{ region.key }}</mat-option>
        </ng-container>
      </mat-optgroup>
      <mat-optgroup label="PRODUCTS">
        <ng-container *ngFor="let product of allRows | distinctItems:'product' | keyvalue">
          <mat-option value="product|{{product.key}}">{{ product.key }}</mat-option>
        </ng-container>
      </mat-optgroup>
    </ng-container>
  </mat-select>
</mat-form-field>